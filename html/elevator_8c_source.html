<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Heislab, gruppe 73: source/elevator.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Heislab, gruppe 73
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">elevator.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="elevator_8h.html">elevator.h</a>&quot;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#define NUMBER_OF_FLOORS 4</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#define NUMBER_OF_ORDER_TYPES 3</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#ifndef QUEUE_SIZE</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#define QUEUE_SIZE 12</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno"><a class="line" href="elevator_8h.html#aef14a0a3a304f9fb8a2ddaf230fdb97c">   12</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="elevator_8h.html#aef14a0a3a304f9fb8a2ddaf230fdb97c">g_FLOOR</a>;</div><div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="elevator_8h.html#a70fbd4c118a0dae974c708fe9906efc0">   13</a></span>&#160;<a class="code" href="hardware_8h.html#a2167c399a24df296afc432bcb88228af">HardwareMovement</a> <a class="code" href="elevator_8h.html#a70fbd4c118a0dae974c708fe9906efc0">g_currentMoveDirection</a>;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<a class="code" href="structOrder.html">Order</a>* <a class="code" href="elevator_8h.html#a89ae5b67fc5f32ffb3bd2b33d7937153">p_firstOrder</a> = &amp;(<a class="code" href="orderQueue_8h.html#aef1d519bbd120cba867daaac745bcda4">orderQueue</a>[0]);</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#af483a333cacb44a46fc9308c0eb6fe86">elevator_clearAllOrderLights</a>();</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="elevator_8h.html#a459f250209099053fec8ae5baca9217a">   18</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#a459f250209099053fec8ae5baca9217a">elevator_init</a>()</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;{</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <a class="code" href="orderQueue_8h.html#a01edbc2bb4a2c6bdbc6a1f38c86f416f">g_relativePosition</a> = ABOVE; <span class="comment">//Elevator set to always start by driving down</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <a class="code" href="elevator_8h.html#af483a333cacb44a46fc9308c0eb6fe86">elevator_clearAllOrderLights</a>();</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keywordtype">int</span> local_queue_size = 12;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (local_queue_size); i++)</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    {</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        <a class="code" href="orderQueue_8h.html#aef1d519bbd120cba867daaac745bcda4">orderQueue</a>[i] = EMPTYORDER;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        <a class="code" href="orderQueue_8h.html#a947a7065cf4559aa8a3757f63b49ac6b">goingUp</a>[i] = EMPTYORDER;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <a class="code" href="orderQueue_8h.html#ae9996e4201e2a2eca860b8b1fd6a2aad">goingDown</a>[i] = EMPTYORDER;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <a class="code" href="orderQueue_8h.html#a79b143a153f51b8cd6797922835c7167">secondGoingUp</a>[i] = EMPTYORDER;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <a class="code" href="orderQueue_8h.html#aa378f7f96761b5ece08108df025bc614">secondGoingDown</a>[i] = EMPTYORDER;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    }</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NUMBER_OF_FLOORS; i++)</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; NUMBER_OF_ORDER_TYPES; j++)</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            <a class="code" href="order_8h.html#aec28246cc942e981cf1deb78424b2a75">orderTable</a>[i][j] = 0;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        }</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    }</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="elevator_8h.html#a407c3ce1e4fbd0de04e04eacdfde1125">elevator_goDown</a>();</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="elevator_8h.html#a2838e9ede4e7884da6efa80c9cc21c46">   44</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="elevator_8h.html#a2838e9ede4e7884da6efa80c9cc21c46">elevator_findCurrentFloor</a>(<span class="keywordtype">int</span> lastFloor)</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f = 0; f &lt; NUMBER_OF_FLOORS; f++)</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="hardware_8h.html#ab048489e6302bb5604aad753f2d7d501">hardware_read_floor_sensor</a>(f))</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            <a class="code" href="elevator_8h.html#aef14a0a3a304f9fb8a2ddaf230fdb97c">g_FLOOR</a> = f;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            <a class="code" href="hardware_8h.html#a407a6ec035ba357de6aa0fbe55501d1e">hardware_command_floor_indicator_on</a>(f);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            <span class="keywordflow">return</span> f;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        }</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="elevator_8h.html#aef14a0a3a304f9fb8a2ddaf230fdb97c">g_FLOOR</a> = lastFloor;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">return</span> lastFloor;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="elevator_8h.html#a08f3a6ced7b1be73a7189dfce3e9f2b9">   59</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="elevator_8h.html#a08f3a6ced7b1be73a7189dfce3e9f2b9">elevator_amIAtFloor</a>(<span class="keywordtype">int</span> targetFloor)</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NUMBER_OF_FLOORS; i++)</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="hardware_8h.html#ab048489e6302bb5604aad753f2d7d501">hardware_read_floor_sensor</a>(i) &amp;&amp; (i == targetFloor))</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <a class="code" href="elevator_8h.html#aef14a0a3a304f9fb8a2ddaf230fdb97c">g_FLOOR</a> = i;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <a class="code" href="hardware_8h.html#a407a6ec035ba357de6aa0fbe55501d1e">hardware_command_floor_indicator_on</a>(i);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    }</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="elevator_8h.html#a6fb864f464d5b4430d4daf8ab7fd9f40">   73</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="elevator_8h.html#a6fb864f464d5b4430d4daf8ab7fd9f40">elevator_amIAtAnyFloor</a>()</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;{</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NUMBER_OF_FLOORS; i++)</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="hardware_8h.html#ab048489e6302bb5604aad753f2d7d501">hardware_read_floor_sensor</a>(i))</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <a class="code" href="elevator_8h.html#aef14a0a3a304f9fb8a2ddaf230fdb97c">g_FLOOR</a> = i;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <a class="code" href="hardware_8h.html#a407a6ec035ba357de6aa0fbe55501d1e">hardware_command_floor_indicator_on</a>(i);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="elevator_8h.html#a6a2cb30d149b5ce3abcf9ca57fce26a3">   87</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#a6a2cb30d149b5ce3abcf9ca57fce26a3">elevator_checkAndAddOrder</a>(<span class="keywordtype">int</span> currentFloor, <a class="code" href="hardware_8h.html#a2167c399a24df296afc432bcb88228af">HardwareMovement</a> moveDirection)</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NUMBER_OF_FLOORS; i++)</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="hardware_8h.html#a87917f3aa093fb46ca821a400d011ee8">hardware_read_order</a>(i, HARDWARE_ORDER_UP))</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <a class="code" href="structOrder.html">Order</a> order = <a class="code" href="order_8h.html#a3d6f85b77b9144d23a203321c2198b26">order_init</a>(i,HARDWARE_ORDER_UP);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="order_8h.html#a520157757ba79177e441d39d8e19af0e">order_checkUnique</a>(order))</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                <a class="code" href="orderQueue_8h.html#a5634d55a8f3d8dd98545e3396da6f550">orderQueue_addOrder</a>(order, currentFloor, moveDirection);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <a class="code" href="order_8h.html#ac21abcaba13fe4317d10143933c434ec">order_toggleUnique</a>(order,1);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="hardware_8h.html#a87917f3aa093fb46ca821a400d011ee8">hardware_read_order</a>(i, HARDWARE_ORDER_DOWN))</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <a class="code" href="structOrder.html">Order</a> order = <a class="code" href="order_8h.html#a3d6f85b77b9144d23a203321c2198b26">order_init</a>(i,HARDWARE_ORDER_DOWN);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="order_8h.html#a520157757ba79177e441d39d8e19af0e">order_checkUnique</a>(order))</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <a class="code" href="orderQueue_8h.html#a5634d55a8f3d8dd98545e3396da6f550">orderQueue_addOrder</a>(order, currentFloor, moveDirection);    </div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                <a class="code" href="order_8h.html#ac21abcaba13fe4317d10143933c434ec">order_toggleUnique</a>(order,1);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="hardware_8h.html#a87917f3aa093fb46ca821a400d011ee8">hardware_read_order</a>(i, HARDWARE_ORDER_INSIDE))</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <a class="code" href="structOrder.html">Order</a> order = <a class="code" href="order_8h.html#a3d6f85b77b9144d23a203321c2198b26">order_init</a>(i,HARDWARE_ORDER_INSIDE);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="order_8h.html#a520157757ba79177e441d39d8e19af0e">order_checkUnique</a>(order))</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                <a class="code" href="orderQueue_8h.html#a5634d55a8f3d8dd98545e3396da6f550">orderQueue_addOrder</a>(order, currentFloor, moveDirection);    </div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                <a class="code" href="order_8h.html#ac21abcaba13fe4317d10143933c434ec">order_toggleUnique</a>(order,1);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="elevator_8h.html#a5e3ee96258c5727f28b6f935938c232f">  121</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#a5e3ee96258c5727f28b6f935938c232f">elevator_setRelativePosition</a>(<a class="code" href="hardware_8h.html#a2167c399a24df296afc432bcb88228af">HardwareMovement</a> moveDirection)</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (moveDirection == HARDWARE_MOVEMENT_UP)</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="orderQueue_8h.html#a01edbc2bb4a2c6bdbc6a1f38c86f416f">g_relativePosition</a> == AT &amp;&amp; (!<a class="code" href="elevator_8h.html#a6fb864f464d5b4430d4daf8ab7fd9f40">elevator_amIAtAnyFloor</a>()))</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <a class="code" href="orderQueue_8h.html#a01edbc2bb4a2c6bdbc6a1f38c86f416f">g_relativePosition</a> = ABOVE;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="orderQueue_8h.html#a01edbc2bb4a2c6bdbc6a1f38c86f416f">g_relativePosition</a> != AT &amp;&amp; (<a class="code" href="elevator_8h.html#a6fb864f464d5b4430d4daf8ab7fd9f40">elevator_amIAtAnyFloor</a>()))</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <a class="code" href="orderQueue_8h.html#a01edbc2bb4a2c6bdbc6a1f38c86f416f">g_relativePosition</a> = AT;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> (moveDirection == HARDWARE_MOVEMENT_DOWN)</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="orderQueue_8h.html#a01edbc2bb4a2c6bdbc6a1f38c86f416f">g_relativePosition</a> == AT &amp;&amp; (!<a class="code" href="elevator_8h.html#a6fb864f464d5b4430d4daf8ab7fd9f40">elevator_amIAtAnyFloor</a>()))</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <a class="code" href="orderQueue_8h.html#a01edbc2bb4a2c6bdbc6a1f38c86f416f">g_relativePosition</a> = BELOW;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="orderQueue_8h.html#a01edbc2bb4a2c6bdbc6a1f38c86f416f">g_relativePosition</a> != AT &amp;&amp; (<a class="code" href="elevator_8h.html#a6fb864f464d5b4430d4daf8ab7fd9f40">elevator_amIAtAnyFloor</a>()))</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <a class="code" href="orderQueue_8h.html#a01edbc2bb4a2c6bdbc6a1f38c86f416f">g_relativePosition</a> = AT;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="elevator_8h.html#a8008c6e5c3579e371d47d7785a612bd1">  147</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#a8008c6e5c3579e371d47d7785a612bd1">elevator_stopMotor</a>()</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;{</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="hardware_8h.html#a01de081ef0510a111053c18cd31afa27">hardware_command_movement</a>(HARDWARE_MOVEMENT_STOP);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="elevator_8h.html#a407c3ce1e4fbd0de04e04eacdfde1125">  151</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#a407c3ce1e4fbd0de04e04eacdfde1125">elevator_goDown</a>()</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="hardware_8h.html#a01de081ef0510a111053c18cd31afa27">hardware_command_movement</a>(HARDWARE_MOVEMENT_DOWN);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="elevator_8h.html#a70fbd4c118a0dae974c708fe9906efc0">g_currentMoveDirection</a> = HARDWARE_MOVEMENT_DOWN;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="elevator_8h.html#a685344f824b86e2bf2f859e23c48adfb">  157</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#a685344f824b86e2bf2f859e23c48adfb">elevator_goUp</a>()</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="hardware_8h.html#a01de081ef0510a111053c18cd31afa27">hardware_command_movement</a>(HARDWARE_MOVEMENT_UP);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="elevator_8h.html#a70fbd4c118a0dae974c708fe9906efc0">g_currentMoveDirection</a> = HARDWARE_MOVEMENT_UP;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="elevator_8h.html#a406bc285aac731104e639c41cba95f70">  163</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#a406bc285aac731104e639c41cba95f70">elevator_openDoors</a>()</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="hardware_8h.html#a80d99ddaa8e7b58c9a88b60ea553c1b6">hardware_command_door_open</a>(1);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="elevator_8h.html#a5a7bb805d1665582566bbc8c9de7deba">  168</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#a5a7bb805d1665582566bbc8c9de7deba">elevator_closeDoors</a>()</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="hardware_8h.html#a80d99ddaa8e7b58c9a88b60ea553c1b6">hardware_command_door_open</a>(0);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="elevator_8h.html#a4b2ef271ceadfcf2eb88a8588a0acf8d">  173</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#a4b2ef271ceadfcf2eb88a8588a0acf8d">elevator_handleOrder</a>()</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = (QUEUE_SIZE); i &gt; -1; i--)</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="orderQueue_8h.html#aef1d519bbd120cba867daaac745bcda4">orderQueue</a>[i].floor == <a class="code" href="elevator_8h.html#aef14a0a3a304f9fb8a2ddaf230fdb97c">g_FLOOR</a>) &amp;&amp; <a class="code" href="orderQueue_8h.html#aef1d519bbd120cba867daaac745bcda4">orderQueue</a>[i].activeOrder)</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <a class="code" href="orderQueue_8h.html#a9f8ea82aa0c78f6cd959a832ef6a9619">orderQueue_deleteByShiftingAtIndex</a>(i);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="elevator_8h.html#af358cc87d28a26347bfa29ba3b8ce8ad">  184</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="elevator_8h.html#af358cc87d28a26347bfa29ba3b8ce8ad">elevator_ordersAtThisFloor</a>() {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = (QUEUE_SIZE); i &gt; -1; i--){</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="orderQueue_8h.html#aef1d519bbd120cba867daaac745bcda4">orderQueue</a>[i].floor == <a class="code" href="elevator_8h.html#aef14a0a3a304f9fb8a2ddaf230fdb97c">g_FLOOR</a>) &amp;&amp; <a class="code" href="orderQueue_8h.html#aef1d519bbd120cba867daaac745bcda4">orderQueue</a>[i].activeOrder)</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="elevator_8h.html#aa7a3445779b6ca7b8c18e08d4b2d31be">  194</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="elevator_8h.html#aa7a3445779b6ca7b8c18e08d4b2d31be">elevator_obstruction</a>() {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="hardware_8h.html#a459fe57a3ee4bc2a28e8a15b2ab14c2d">hardware_read_obstruction_signal</a>();</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="elevator_8h.html#a524a77c9ab579a056f1961f4dca8472a">  198</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="elevator_8h.html#a524a77c9ab579a056f1961f4dca8472a">elevator_stopSignal</a>() {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="hardware_8h.html#a4a77b27c86675c00b513db3445966804">hardware_read_stop_signal</a>();</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="elevator_8h.html#ae0780fecb993191ed0085aa574cd3073">  202</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#ae0780fecb993191ed0085aa574cd3073">elevator_stopLightOff</a>(){</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="hardware_8h.html#aa75b3ac17f72b25946414f48d0063a10">hardware_command_stop_light</a>(0);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="elevator_8h.html#a43adfba5917de9c20d7f8df9aff7aa03">  206</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#a43adfba5917de9c20d7f8df9aff7aa03">elevator_stopLightOn</a>(){</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="hardware_8h.html#aa75b3ac17f72b25946414f48d0063a10">hardware_command_stop_light</a>(1);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="elevator_8h.html#a18f4e6c420b9e8d1b49a28cdb4d41331">  210</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="elevator_8h.html#a18f4e6c420b9e8d1b49a28cdb4d41331">elevator_checkForStop</a>(){</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="elevator_8h.html#a524a77c9ab579a056f1961f4dca8472a">elevator_stopSignal</a>() &amp;&amp; <a class="code" href="elevator_8h.html#a6fb864f464d5b4430d4daf8ab7fd9f40">elevator_amIAtAnyFloor</a>())</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="elevator_8h.html#a8008c6e5c3579e371d47d7785a612bd1">elevator_stopMotor</a>();</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="elevator_8h.html#a406bc285aac731104e639c41cba95f70">elevator_openDoors</a>();</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="elevator_8h.html#a524a77c9ab579a056f1961f4dca8472a">elevator_stopSignal</a>() &amp;&amp; !<a class="code" href="elevator_8h.html#a6fb864f464d5b4430d4daf8ab7fd9f40">elevator_amIAtAnyFloor</a>())</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="elevator_8h.html#a8008c6e5c3579e371d47d7785a612bd1">elevator_stopMotor</a>();</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="elevator_8h.html#af483a333cacb44a46fc9308c0eb6fe86">  225</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#af483a333cacb44a46fc9308c0eb6fe86">elevator_clearAllOrderLights</a>(){</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="hardware_8h.html#a796a8de8ce0ae769d7dbd3327a7bdbe7">HardwareOrder</a> order_types[3] = {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        HARDWARE_ORDER_UP,</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        HARDWARE_ORDER_INSIDE,</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        HARDWARE_ORDER_DOWN</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    };</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> f = 0; f &lt; HARDWARE_NUMBER_OF_FLOORS; f++){</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++){</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <a class="code" href="hardware_8h.html#a796a8de8ce0ae769d7dbd3327a7bdbe7">HardwareOrder</a> type = order_types[i];</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <a class="code" href="hardware_8h.html#aa9b33faa52f0ec5b614d3e7dc05be140">hardware_command_order_light</a>(f, type, 0);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="elevator_8h.html#a6e7c4459387958be26802d25690f961a">  240</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="elevator_8h.html#a6e7c4459387958be26802d25690f961a">elevator_clearAllOrders</a>(){</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="orderQueue_8h.html#a99302be8c70450b60f46185e5e53ab9c">orderQueue_clear</a>();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div><div class="ttc" id="orderQueue_8h_html_a947a7065cf4559aa8a3757f63b49ac6b"><div class="ttname"><a href="orderQueue_8h.html#a947a7065cf4559aa8a3757f63b49ac6b">goingUp</a></div><div class="ttdeci">Order goingUp[12]</div><div class="ttdoc">Array to hold all orders that need to be handled next time elevator is going up. This can be immediat...</div><div class="ttdef"><b>Definition:</b> <a href="orderQueue_8h_source.html#l00038">orderQueue.h:38</a></div></div>
<div class="ttc" id="order_8h_html_a520157757ba79177e441d39d8e19af0e"><div class="ttname"><a href="order_8h.html#a520157757ba79177e441d39d8e19af0e">order_checkUnique</a></div><div class="ttdeci">int order_checkUnique(Order order)</div><div class="ttdoc">Checks if order already exists. </div><div class="ttdef"><b>Definition:</b> <a href="order_8c_source.html#l00038">order.c:38</a></div></div>
<div class="ttc" id="orderQueue_8h_html_aa378f7f96761b5ece08108df025bc614"><div class="ttname"><a href="orderQueue_8h.html#aa378f7f96761b5ece08108df025bc614">secondGoingDown</a></div><div class="ttdeci">Order secondGoingDown[12]</div><div class="ttdoc">Array to hold all orders that need to be handled in the elevator&amp;#39;s &quot;second round down&quot;. Only used when elevator&amp;#39;s direction is down. Used in orderQueue_sortOrderQueue and orderQueue_sortChunksByDirection. </div><div class="ttdef"><b>Definition:</b> <a href="orderQueue_8h_source.html#l00060">orderQueue.h:60</a></div></div>
<div class="ttc" id="hardware_8h_html_a80d99ddaa8e7b58c9a88b60ea553c1b6"><div class="ttname"><a href="hardware_8h.html#a80d99ddaa8e7b58c9a88b60ea553c1b6">hardware_command_door_open</a></div><div class="ttdeci">void hardware_command_door_open(int door_open)</div><div class="ttdoc">Commands the hardware to open- or close the elevator door. </div></div>
<div class="ttc" id="orderQueue_8h_html_a99302be8c70450b60f46185e5e53ab9c"><div class="ttname"><a href="orderQueue_8h.html#a99302be8c70450b60f46185e5e53ab9c">orderQueue_clear</a></div><div class="ttdeci">void orderQueue_clear()</div><div class="ttdoc">Clears all orders in queue. </div><div class="ttdef"><b>Definition:</b> <a href="orderQueue_8c_source.html#l00010">orderQueue.c:10</a></div></div>
<div class="ttc" id="elevator_8h_html_a459f250209099053fec8ae5baca9217a"><div class="ttname"><a href="elevator_8h.html#a459f250209099053fec8ae5baca9217a">elevator_init</a></div><div class="ttdeci">void elevator_init()</div><div class="ttdoc">Initializes arrays and resets lights. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00018">elevator.c:18</a></div></div>
<div class="ttc" id="hardware_8h_html_a459fe57a3ee4bc2a28e8a15b2ab14c2d"><div class="ttname"><a href="hardware_8h.html#a459fe57a3ee4bc2a28e8a15b2ab14c2d">hardware_read_obstruction_signal</a></div><div class="ttdeci">int hardware_read_obstruction_signal()</div><div class="ttdoc">Polls the hardware for the current obstruction signal. </div></div>
<div class="ttc" id="elevator_8h_html_a2838e9ede4e7884da6efa80c9cc21c46"><div class="ttname"><a href="elevator_8h.html#a2838e9ede4e7884da6efa80c9cc21c46">elevator_findCurrentFloor</a></div><div class="ttdeci">int elevator_findCurrentFloor(int lastFloor)</div><div class="ttdoc">Checks if new floor is reached. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00044">elevator.c:44</a></div></div>
<div class="ttc" id="elevator_8h_html_a407c3ce1e4fbd0de04e04eacdfde1125"><div class="ttname"><a href="elevator_8h.html#a407c3ce1e4fbd0de04e04eacdfde1125">elevator_goDown</a></div><div class="ttdeci">void elevator_goDown()</div><div class="ttdoc">Starts the motor, making the elevator go downwards. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00151">elevator.c:151</a></div></div>
<div class="ttc" id="hardware_8h_html_a4a77b27c86675c00b513db3445966804"><div class="ttname"><a href="hardware_8h.html#a4a77b27c86675c00b513db3445966804">hardware_read_stop_signal</a></div><div class="ttdeci">int hardware_read_stop_signal()</div><div class="ttdoc">Polls the hardware for the current stop signal. </div></div>
<div class="ttc" id="elevator_8h_html_a6e7c4459387958be26802d25690f961a"><div class="ttname"><a href="elevator_8h.html#a6e7c4459387958be26802d25690f961a">elevator_clearAllOrders</a></div><div class="ttdeci">void elevator_clearAllOrders()</div><div class="ttdoc">Deletes all active orders in orderQueue. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00240">elevator.c:240</a></div></div>
<div class="ttc" id="elevator_8h_html_a685344f824b86e2bf2f859e23c48adfb"><div class="ttname"><a href="elevator_8h.html#a685344f824b86e2bf2f859e23c48adfb">elevator_goUp</a></div><div class="ttdeci">void elevator_goUp()</div><div class="ttdoc">Starts the motor, making the elevator go upwards. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00157">elevator.c:157</a></div></div>
<div class="ttc" id="order_8h_html_ac21abcaba13fe4317d10143933c434ec"><div class="ttname"><a href="order_8h.html#ac21abcaba13fe4317d10143933c434ec">order_toggleUnique</a></div><div class="ttdeci">void order_toggleUnique(Order order, int on)</div><div class="ttdoc">Toggles corresponding bit in orderTable to 1 if unique, 0 if removing order. </div><div class="ttdef"><b>Definition:</b> <a href="order_8c_source.html#l00030">order.c:30</a></div></div>
<div class="ttc" id="elevator_8h_html_ae0780fecb993191ed0085aa574cd3073"><div class="ttname"><a href="elevator_8h.html#ae0780fecb993191ed0085aa574cd3073">elevator_stopLightOff</a></div><div class="ttdeci">void elevator_stopLightOff()</div><div class="ttdoc">Turns off the stop-light. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00202">elevator.c:202</a></div></div>
<div class="ttc" id="structOrder_html"><div class="ttname"><a href="structOrder.html">Order</a></div><div class="ttdoc">Type used to store orders received. </div><div class="ttdef"><b>Definition:</b> <a href="order_8h_source.html#l00019">order.h:19</a></div></div>
<div class="ttc" id="elevator_8h_html_a524a77c9ab579a056f1961f4dca8472a"><div class="ttname"><a href="elevator_8h.html#a524a77c9ab579a056f1961f4dca8472a">elevator_stopSignal</a></div><div class="ttdeci">int elevator_stopSignal()</div><div class="ttdoc">Checks if the stop-button is pressed. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00198">elevator.c:198</a></div></div>
<div class="ttc" id="orderQueue_8h_html_aef1d519bbd120cba867daaac745bcda4"><div class="ttname"><a href="orderQueue_8h.html#aef1d519bbd120cba867daaac745bcda4">orderQueue</a></div><div class="ttdeci">Order orderQueue[12]</div><div class="ttdoc">Global array to hold up to 12 orders (12 is the max theoretical possible), sorted after proximity to ...</div><div class="ttdef"><b>Definition:</b> <a href="orderQueue_8h_source.html#l00030">orderQueue.h:30</a></div></div>
<div class="ttc" id="elevator_8h_html_a406bc285aac731104e639c41cba95f70"><div class="ttname"><a href="elevator_8h.html#a406bc285aac731104e639c41cba95f70">elevator_openDoors</a></div><div class="ttdeci">void elevator_openDoors()</div><div class="ttdoc">Turns on the open doors-light (opening the doors). </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00163">elevator.c:163</a></div></div>
<div class="ttc" id="hardware_8h_html_a796a8de8ce0ae769d7dbd3327a7bdbe7"><div class="ttname"><a href="hardware_8h.html#a796a8de8ce0ae769d7dbd3327a7bdbe7">HardwareOrder</a></div><div class="ttdeci">HardwareOrder</div><div class="ttdoc">Order type used in hardware_read_order and in hardware_command_order_light. </div><div class="ttdef"><b>Definition:</b> <a href="hardware_8h_source.html#l00027">hardware.h:27</a></div></div>
<div class="ttc" id="hardware_8h_html_a407a6ec035ba357de6aa0fbe55501d1e"><div class="ttname"><a href="hardware_8h.html#a407a6ec035ba357de6aa0fbe55501d1e">hardware_command_floor_indicator_on</a></div><div class="ttdeci">void hardware_command_floor_indicator_on(int floor)</div><div class="ttdoc">Commands the hardware to turn on the floor indicator for floor. All indicators all mutually exclusive...</div></div>
<div class="ttc" id="elevator_8h_html_a08f3a6ced7b1be73a7189dfce3e9f2b9"><div class="ttname"><a href="elevator_8h.html#a08f3a6ced7b1be73a7189dfce3e9f2b9">elevator_amIAtFloor</a></div><div class="ttdeci">int elevator_amIAtFloor(int targetFloor)</div><div class="ttdoc">Checks if target destination (first element of orderQueue) is reached. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00059">elevator.c:59</a></div></div>
<div class="ttc" id="elevator_8h_html_aa7a3445779b6ca7b8c18e08d4b2d31be"><div class="ttname"><a href="elevator_8h.html#aa7a3445779b6ca7b8c18e08d4b2d31be">elevator_obstruction</a></div><div class="ttdeci">int elevator_obstruction()</div><div class="ttdoc">Checks whether there is an obstruction or not. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00194">elevator.c:194</a></div></div>
<div class="ttc" id="hardware_8h_html_a87917f3aa093fb46ca821a400d011ee8"><div class="ttname"><a href="hardware_8h.html#a87917f3aa093fb46ca821a400d011ee8">hardware_read_order</a></div><div class="ttdeci">int hardware_read_order(int floor, HardwareOrder order_type)</div><div class="ttdoc">Polls the hardware for the status of orders from floor floor of type order_type. </div></div>
<div class="ttc" id="orderQueue_8h_html_ae9996e4201e2a2eca860b8b1fd6a2aad"><div class="ttname"><a href="orderQueue_8h.html#ae9996e4201e2a2eca860b8b1fd6a2aad">goingDown</a></div><div class="ttdeci">Order goingDown[12]</div><div class="ttdoc">Array to hold all orders that need to be handled next time elevator is going down. This can be immediately, but also in second turn after elevator has already gone up, if its initial direction was up (in accordance with requirements). Used in orderQueue_sortOrderQueue and orderQueue_sortChunksByDirection. </div><div class="ttdef"><b>Definition:</b> <a href="orderQueue_8h_source.html#l00046">orderQueue.h:46</a></div></div>
<div class="ttc" id="orderQueue_8h_html_a9f8ea82aa0c78f6cd959a832ef6a9619"><div class="ttname"><a href="orderQueue_8h.html#a9f8ea82aa0c78f6cd959a832ef6a9619">orderQueue_deleteByShiftingAtIndex</a></div><div class="ttdeci">void orderQueue_deleteByShiftingAtIndex(int i)</div><div class="ttdoc">shifts every element in the order queue one place towards left (towards lower indices), from the index given. </div><div class="ttdef"><b>Definition:</b> <a href="orderQueue_8c_source.html#l00016">orderQueue.c:16</a></div></div>
<div class="ttc" id="hardware_8h_html_a01de081ef0510a111053c18cd31afa27"><div class="ttname"><a href="hardware_8h.html#a01de081ef0510a111053c18cd31afa27">hardware_command_movement</a></div><div class="ttdeci">void hardware_command_movement(HardwareMovement movement)</div><div class="ttdoc">Commands the elevator to either move up or down, or commands it to halt. </div></div>
<div class="ttc" id="elevator_8h_html_a18f4e6c420b9e8d1b49a28cdb4d41331"><div class="ttname"><a href="elevator_8h.html#a18f4e6c420b9e8d1b49a28cdb4d41331">elevator_checkForStop</a></div><div class="ttdeci">int elevator_checkForStop()</div><div class="ttdoc">Checks the criteria for going into state EMERGENCY_STOP. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00210">elevator.c:210</a></div></div>
<div class="ttc" id="elevator_8h_html_a8008c6e5c3579e371d47d7785a612bd1"><div class="ttname"><a href="elevator_8h.html#a8008c6e5c3579e371d47d7785a612bd1">elevator_stopMotor</a></div><div class="ttdeci">void elevator_stopMotor()</div><div class="ttdoc">Stops the motor. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00147">elevator.c:147</a></div></div>
<div class="ttc" id="orderQueue_8h_html_a01edbc2bb4a2c6bdbc6a1f38c86f416f"><div class="ttname"><a href="orderQueue_8h.html#a01edbc2bb4a2c6bdbc6a1f38c86f416f">g_relativePosition</a></div><div class="ttdeci">RelativePosition g_relativePosition</div><div class="ttdoc">Global variable that holds the elevator&amp;#39;s current relative position. </div><div class="ttdef"><b>Definition:</b> <a href="orderQueue_8c_source.html#l00008">orderQueue.c:8</a></div></div>
<div class="ttc" id="elevator_8h_html"><div class="ttname"><a href="elevator_8h.html">elevator.h</a></div><div class="ttdoc">elevator operations and states are in this file. </div></div>
<div class="ttc" id="orderQueue_8h_html_a5634d55a8f3d8dd98545e3396da6f550"><div class="ttname"><a href="orderQueue_8h.html#a5634d55a8f3d8dd98545e3396da6f550">orderQueue_addOrder</a></div><div class="ttdeci">void orderQueue_addOrder(Order order, int elevator_floor, HardwareMovement direction)</div><div class="ttdoc">Adds a single, valid order, then sorts entire orderQueue. </div><div class="ttdef"><b>Definition:</b> <a href="orderQueue_8c_source.html#l00250">orderQueue.c:250</a></div></div>
<div class="ttc" id="elevator_8h_html_a6fb864f464d5b4430d4daf8ab7fd9f40"><div class="ttname"><a href="elevator_8h.html#a6fb864f464d5b4430d4daf8ab7fd9f40">elevator_amIAtAnyFloor</a></div><div class="ttdeci">int elevator_amIAtAnyFloor()</div><div class="ttdoc">Checks whether the elevator is at a floor or inbetween floors. Note that this function does not check...</div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00073">elevator.c:73</a></div></div>
<div class="ttc" id="elevator_8h_html_aef14a0a3a304f9fb8a2ddaf230fdb97c"><div class="ttname"><a href="elevator_8h.html#aef14a0a3a304f9fb8a2ddaf230fdb97c">g_FLOOR</a></div><div class="ttdeci">int g_FLOOR</div><div class="ttdoc">Global variable that is updated to always hold the elevator&amp;#39;s last floor if between floors...</div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00012">elevator.c:12</a></div></div>
<div class="ttc" id="elevator_8h_html_a89ae5b67fc5f32ffb3bd2b33d7937153"><div class="ttname"><a href="elevator_8h.html#a89ae5b67fc5f32ffb3bd2b33d7937153">p_firstOrder</a></div><div class="ttdeci">Order * p_firstOrder</div><div class="ttdoc">Global pointer that points to the first element of orderQueue. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8h_source.html#l00024">elevator.h:24</a></div></div>
<div class="ttc" id="elevator_8h_html_a4b2ef271ceadfcf2eb88a8588a0acf8d"><div class="ttname"><a href="elevator_8h.html#a4b2ef271ceadfcf2eb88a8588a0acf8d">elevator_handleOrder</a></div><div class="ttdeci">void elevator_handleOrder()</div><div class="ttdoc">Removes all orders at the elevator&amp;#39;s current floor from the orderQueue. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00173">elevator.c:173</a></div></div>
<div class="ttc" id="hardware_8h_html_a2167c399a24df296afc432bcb88228af"><div class="ttname"><a href="hardware_8h.html#a2167c399a24df296afc432bcb88228af">HardwareMovement</a></div><div class="ttdeci">HardwareMovement</div><div class="ttdoc">Movement type used in hardware_command_movement. </div><div class="ttdef"><b>Definition:</b> <a href="hardware_8h_source.html#l00017">hardware.h:17</a></div></div>
<div class="ttc" id="hardware_8h_html_ab048489e6302bb5604aad753f2d7d501"><div class="ttname"><a href="hardware_8h.html#ab048489e6302bb5604aad753f2d7d501">hardware_read_floor_sensor</a></div><div class="ttdeci">int hardware_read_floor_sensor(int floor)</div><div class="ttdoc">Polls the floor sensor for the given floor. </div></div>
<div class="ttc" id="elevator_8h_html_af483a333cacb44a46fc9308c0eb6fe86"><div class="ttname"><a href="elevator_8h.html#af483a333cacb44a46fc9308c0eb6fe86">elevator_clearAllOrderLights</a></div><div class="ttdeci">void elevator_clearAllOrderLights()</div><div class="ttdoc">Turns all orders&amp;#39; lights off. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00225">elevator.c:225</a></div></div>
<div class="ttc" id="orderQueue_8h_html_a79b143a153f51b8cd6797922835c7167"><div class="ttname"><a href="orderQueue_8h.html#a79b143a153f51b8cd6797922835c7167">secondGoingUp</a></div><div class="ttdeci">Order secondGoingUp[12]</div><div class="ttdoc">Array to hold all orders that need to be handled in the elevator&amp;#39;s &quot;second round up&quot;. Only used when elevator&amp;#39;s direction is up. Used in orderQueue_sortOrderQueue and orderQueue_sortChunksByDirection. </div><div class="ttdef"><b>Definition:</b> <a href="orderQueue_8h_source.html#l00053">orderQueue.h:53</a></div></div>
<div class="ttc" id="order_8h_html_aec28246cc942e981cf1deb78424b2a75"><div class="ttname"><a href="order_8h.html#aec28246cc942e981cf1deb78424b2a75">orderTable</a></div><div class="ttdeci">int orderTable[4][3]</div><div class="ttdoc">Lookup table that shows &quot;true&quot; (1) for each order that&amp;#39;s placed. Table&amp;#39;s layout corresponds with hard...</div><div class="ttdef"><b>Definition:</b> <a href="order_8c_source.html#l00003">order.c:3</a></div></div>
<div class="ttc" id="elevator_8h_html_a6a2cb30d149b5ce3abcf9ca57fce26a3"><div class="ttname"><a href="elevator_8h.html#a6a2cb30d149b5ce3abcf9ca57fce26a3">elevator_checkAndAddOrder</a></div><div class="ttdeci">void elevator_checkAndAddOrder(int currentFloor, HardwareMovement moveDirection)</div><div class="ttdoc">Checks if someone places any valid order at any place. Will initialize this order and adds it to orde...</div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00087">elevator.c:87</a></div></div>
<div class="ttc" id="elevator_8h_html_af358cc87d28a26347bfa29ba3b8ce8ad"><div class="ttname"><a href="elevator_8h.html#af358cc87d28a26347bfa29ba3b8ce8ad">elevator_ordersAtThisFloor</a></div><div class="ttdeci">int elevator_ordersAtThisFloor()</div><div class="ttdoc">Checks whether there are any orders at the elevator&amp;#39;s current floor or not. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00184">elevator.c:184</a></div></div>
<div class="ttc" id="hardware_8h_html_aa9b33faa52f0ec5b614d3e7dc05be140"><div class="ttname"><a href="hardware_8h.html#aa9b33faa52f0ec5b614d3e7dc05be140">hardware_command_order_light</a></div><div class="ttdeci">void hardware_command_order_light(int floor, HardwareOrder order_type, int on)</div><div class="ttdoc">Sets the light in a button corresponding to an order of type order_type, at floor floor...</div></div>
<div class="ttc" id="order_8h_html_a3d6f85b77b9144d23a203321c2198b26"><div class="ttname"><a href="order_8h.html#a3d6f85b77b9144d23a203321c2198b26">order_init</a></div><div class="ttdeci">Order order_init(int floor, HardwareOrder orderType)</div><div class="ttdoc">Initializes valid order. </div><div class="ttdef"><b>Definition:</b> <a href="order_8c_source.html#l00005">order.c:5</a></div></div>
<div class="ttc" id="elevator_8h_html_a70fbd4c118a0dae974c708fe9906efc0"><div class="ttname"><a href="elevator_8h.html#a70fbd4c118a0dae974c708fe9906efc0">g_currentMoveDirection</a></div><div class="ttdeci">HardwareMovement g_currentMoveDirection</div><div class="ttdoc">Global variable that is updated to always hold the elevator&amp;#39;s current movement direction. Note that stop is not considered a direction. In cases of the elevator standing still, the elevator&amp;#39;s last direction is held. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00013">elevator.c:13</a></div></div>
<div class="ttc" id="elevator_8h_html_a5a7bb805d1665582566bbc8c9de7deba"><div class="ttname"><a href="elevator_8h.html#a5a7bb805d1665582566bbc8c9de7deba">elevator_closeDoors</a></div><div class="ttdeci">void elevator_closeDoors()</div><div class="ttdoc">Turns off the open doors-light (closing the doors). </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00168">elevator.c:168</a></div></div>
<div class="ttc" id="elevator_8h_html_a5e3ee96258c5727f28b6f935938c232f"><div class="ttname"><a href="elevator_8h.html#a5e3ee96258c5727f28b6f935938c232f">elevator_setRelativePosition</a></div><div class="ttdeci">void elevator_setRelativePosition(HardwareMovement moveDirection)</div><div class="ttdoc">Sets new g_relativePosition when needed. Keeps track of where we are. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00121">elevator.c:121</a></div></div>
<div class="ttc" id="elevator_8h_html_a43adfba5917de9c20d7f8df9aff7aa03"><div class="ttname"><a href="elevator_8h.html#a43adfba5917de9c20d7f8df9aff7aa03">elevator_stopLightOn</a></div><div class="ttdeci">void elevator_stopLightOn()</div><div class="ttdoc">Turns on the stop-light. </div><div class="ttdef"><b>Definition:</b> <a href="elevator_8c_source.html#l00206">elevator.c:206</a></div></div>
<div class="ttc" id="hardware_8h_html_aa75b3ac17f72b25946414f48d0063a10"><div class="ttname"><a href="hardware_8h.html#aa75b3ac17f72b25946414f48d0063a10">hardware_command_stop_light</a></div><div class="ttdeci">void hardware_command_stop_light(int on)</div><div class="ttdoc">Sets the light in the panel stop button. </div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
